<html>
  <head>
    <title>Portfolio Daniela</title>
    <base href="https://mozilla.github.io" />
  </head>
  <body>
    <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>

    <style>
      body {
        margin: 0 auto;
      }

      #pdf-viewer {
        direction: ltr;
        width: 100%;
      }

      .pdf-page-canvas {
        margin-bottom: 2px;
      }

      .pdf-page-canvas:last-of-type {
        margin-bottom: 0px;
      }

      #annotation-layer {
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
        opacity: 0.2;
        line-height: 1;
      }

      #annotation-layer > section {
        color: transparent;
        position: absolute;
        white-space: pre;
        cursor: text;
        transform-origin: 0% 0%;
      }

      #annotation-layer > .linkAnnotation > a {
        position: absolute;
        font-size: 1em;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
    </style>

    <script>
      // If absolute URL from the remote server is provided, configure the CORS
      // header on that server.
      // var url = "//assets/portfolio_kurz.pdf";
      // var url = 'assets/2204840608.pdf'

      // Loaded via <script> tag, create shortcut to access PDF.js exports.
      var pdfjsLib = window["pdfjs-dist/build/pdf"];

      var thePdf = null;
      var scale = 1;
      // The workerSrc property shall be specified.
      pdfjsLib.GlobalWorkerOptions.workerSrc =
        "https://mozilla.github.io/pdf.js/build/pdf.worker.js";

      // Asynchronous download of PDF
      var loadingTask = pdfjsLib.getDocument("portfolio_kurz.pdf");
      loadingTask.promise.then(function (pdf) {
        thePdf = pdf;
        viewer = document.getElementById("pdf-viewer");

        for (page = 1; page <= pdf.numPages; page++) {
          canvas = document.createElement("canvas");
          canvas.className = "pdf-page-canvas";
          viewer.appendChild(canvas);
          renderPage(page, canvas);
        }
      });

      function renderPage(pageNumber, canvas) {
        thePdf.getPage(pageNumber).then(function (page) {
          viewport = page.getViewport({
            scale:
              window.screen.width / page.getViewport({ scale: scale }).width,
          });
          canvas.height = viewport.height;
          canvas.width = viewport.width;
          page
            .render({
              canvasContext: canvas.getContext("2d"),
              viewport: viewport,
            })
            .then(function () {
              return page.getAnnotations();
            })
            .then(function (annotationData) {
              // PDF canvas
              var pdf_canvas = $("#pdf-canvas");

              // Canvas offset
              var canvas_offset = pdf_canvas.offset();

              // Canvas height
              var canvas_height = pdf_canvas.get(0).height;

              // Canvas width
              var canvas_width = pdf_canvas.get(0).width;

              // CSS for annotation layer
              $("#annotation-layer").css({
                left: canvas_offset.left + "px",
                top: canvas_offset.top + "px",
                height: canvas_height + "px",
                width: canvas_width + "px",
              });

              // Render the annotation layer
              pdfjsLib.AnnotationLayer.render({
                viewport: viewport.clone({ dontFlip: true }),
                div: $("#annotation-layer").get(0),
                annotations: annotationData,
                page: page,
              });
            });
        });
      }
    </script>

    <div id="pdf-viewer"></div>
    <div id="annotation-layer"></div>
  </body>
</html>
